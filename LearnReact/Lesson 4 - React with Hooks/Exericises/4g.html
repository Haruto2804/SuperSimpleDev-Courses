<!DOCTYPE html>
<html>
  <head>
    <title>4g</title>
  </head>
  <body>
    <div class="js-container"></div>
    <script src = "https://unpkg.com/supersimpledev/react-bacics.js" ></script>
    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>
    <script src = "https://unpkg.com/supersimpledev/chatbot.js"></script>
    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script src="https://unpkg.com/supersimpledev/dayjs.js"></script>
    <script type="text/babel">
      

      function Clock () {
        const [time,setTime] = React.useState(
        dayjs().format('HH:mm:ss'));
            React.useEffect (()=> { // WHEN COMPONENT HAS CREATE COMPLETELY, RUN THIS CODE
              setInterval (()=> {
                console.log('run code');
                setTime ( dayjs().format('HH:mm:ss'));
                
              },1000)


              
            },[]) // Because we have the dependency array is empty, so it will be run once when component create !
        return (
          <>
            current Time: {time}
          </>
        )
      }
      const container = document.querySelector('.js-container');
      ReactDOM.createRoot(container).render (<Clock />)
    </script>
  </body>
</html>


<!-- NHAN XET
React.useEffect(() => {
  // HÃ m nÃ y cháº¡y SAU Má»–I Láº¦N RENDER
  setInterval(() => {
    console.log('run code');
    setTime(dayjs().format('HH:mm:ss'));
  }, 1000);
}); // KhÃ´ng cÃ³ máº£ng phá»¥ thuá»™c
Luá»“ng hoáº¡t Ä‘á»™ng (VÃ²ng láº·p vÃ´ táº­n):

Láº§n render 1: Component Clock mount.

useEffect cháº¡y. NÃ³ táº¡o ra má»™t setInterval (ID: 1).

Sau 1 giÃ¢y: setInterval (ID: 1) gá»i setTime().

Viá»‡c gá»i setTime() lÃ m state thay Ä‘á»•i, khiáº¿n component Clock render láº¡i.

Láº§n render 2: useEffect láº¡i cháº¡y vÃ¬ khÃ´ng cÃ³ máº£ng phá»¥ thuá»™c. NÃ³ táº¡o thÃªm má»™t setInterval má»›i (ID: 2). BÃ¢y giá» chÃºng ta cÃ³ 2 interval Ä‘ang cháº¡y song song! ðŸ›

Sau 1 giÃ¢y ná»¯a: Cáº£ setInterval (ID: 1) vÃ  (ID: 2) Ä‘á»u gá»i setTime(). Component láº¡i render láº¡i.

Láº§n render 3: useEffect láº¡i cháº¡y, táº¡o thÃªm setInterval (ID: 3)...

Háº­u quáº£:

Báº¡n táº¡o ra má»™t setInterval má»›i sau má»—i láº§n render mÃ  khÃ´ng bao giá» há»§y nhá»¯ng cÃ¡i cÅ©.

Sau vÃ i giÃ¢y, báº¡n sáº½ cÃ³ hÃ ng chá»¥c, hÃ ng trÄƒm interval cháº¡y cÃ¹ng lÃºc.

Äiá»u nÃ y gÃ¢y ra rÃ² rá»‰ bá»™ nhá»› nghiÃªm trá»ng vÃ  lÃ m á»©ng dá»¥ng cá»§a báº¡n bá»‹ treo (crash) vÃ¬ pháº£i thá»±c hiá»‡n quÃ¡ nhiá»u tÃ¡c vá»¥ cÃ¹ng lÃºc. -->