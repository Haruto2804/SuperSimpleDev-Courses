Cháº¯c cháº¯n rá»“i\! DÆ°á»›i Ä‘Ã¢y lÃ  toÃ n bá»™ kiáº¿n thá»©c chi tiáº¿t vá» **React Router**, tá»« khÃ¡i niá»‡m cÆ¡ báº£n, cÃ¡ch cÃ i Ä‘áº·t, cho Ä‘áº¿n cÃ¡c hook vÃ  ká»¹ thuáº­t nÃ¢ng cao.

### 1\. React Router lÃ  gÃ¬ vÃ  táº¡i sao cáº§n nÃ³? ğŸ§

Trong má»™t á»©ng dá»¥ng web truyá»n thá»‘ng, khi báº¡n nháº¥p vÃ o má»™t liÃªn káº¿t, trÃ¬nh duyá»‡t sáº½ gá»­i yÃªu cáº§u Ä‘áº¿n mÃ¡y chá»§ vÃ  táº£i má»™t trang HTML hoÃ n toÃ n má»›i. Äiá»u nÃ y gÃ¢y ra hiá»‡n tÆ°á»£ng "chá»›p trang" (full page reload).

React táº¡o ra cÃ¡c **á»¨ng dá»¥ng trang Ä‘Æ¡n (Single Page Application - SPA)**. Trong má»™t SPA, toÃ n bá»™ á»©ng dá»¥ng Ä‘Æ°á»£c táº£i vá» chá»‰ má»™t láº§n. Khi ngÆ°á»i dÃ¹ng Ä‘iá»u hÆ°á»›ng, thay vÃ¬ táº£i láº¡i toÃ n bá»™ trang, React chá»‰ cáº§n cáº­p nháº­t cÃ¡c thÃ nh pháº§n (component) cáº§n thiáº¿t trÃªn giao diá»‡n.

â¡ï¸ **React Router** lÃ  thÆ° viá»‡n giÃºp quáº£n lÃ½ viá»‡c Ä‘iá»u hÆ°á»›ng nÃ y. NÃ³ Ä‘á»“ng bá»™ giao diá»‡n ngÆ°á»i dÃ¹ng (UI) vá»›i URL trÃªn thanh Ä‘á»‹a chá»‰ cá»§a trÃ¬nh duyá»‡t, cho phÃ©p ngÆ°á»i dÃ¹ng di chuyá»ƒn qua láº¡i giá»¯a cÃ¡c "trang" khÃ¡c nhau trong á»©ng dá»¥ng cá»§a báº¡n mÃ  khÃ´ng cáº§n táº£i láº¡i trang.

-----

### 2\. CÃ i Ä‘áº·t ğŸ“¦

Äá»ƒ sá»­ dá»¥ng React Router trong dá»± Ã¡n cá»§a báº¡n, hÃ£y má»Ÿ terminal vÃ  cháº¡y lá»‡nh sau:

**Sá»­ dá»¥ng npm:**

```bash
npm install react-router-dom
```

**Sá»­ dá»¥ng yarn:**

```bash
yarn add react-router-dom
```

*LÆ°u Ã½: ChÃºng ta cÃ i Ä‘áº·t `react-router-dom` vÃ¬ nÃ³ chá»©a má»i thá»© cáº§n thiáº¿t cho viá»‡c Ä‘á»‹nh tuyáº¿n trong á»©ng dá»¥ng web, bao gá»“m cáº£ lÃµi cá»§a `react-router`.*

-----

### 3\. Thiáº¿t láº­p cÆ¡ báº£n vÃ  cÃ¡c thÃ nh pháº§n cá»‘t lÃµi ğŸ—ï¸

Äá»ƒ React Router hoáº¡t Ä‘á»™ng, báº¡n cáº§n "bá»c" toÃ n bá»™ á»©ng dá»¥ng cá»§a mÃ¬nh trong má»™t component Router.

#### a. `BrowserRouter`

ÄÃ¢y lÃ  component báº¡n sáº½ sá»­ dá»¥ng á»Ÿ cáº¥p cao nháº¥t. NÃ³ sá»­ dá»¥ng History API cá»§a HTML5 Ä‘á»ƒ giá»¯ cho UI cá»§a báº¡n Ä‘á»“ng bá»™ vá»›i URL.

Trong file `src/index.js` hoáº·c `src/main.jsx` cá»§a báº¡n:

```jsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import { BrowserRouter } from 'react-router-dom';
import App from './App';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    {/* Bá»c toÃ n bá»™ á»©ng dá»¥ng trong BrowserRouter */}
    <BrowserRouter>
      <App />
    </BrowserRouter>
  </React.StrictMode>
);
```

#### b. `Routes` vÃ  `Route`

ÄÃ¢y lÃ  hai thÃ nh pháº§n chÃ­nh Ä‘á»ƒ Ä‘á»‹nh nghÄ©a cÃ¡c tuyáº¿n Ä‘Æ°á»ng (routes) cá»§a báº¡n.

  * `<Routes>`: LÃ  component cha, chá»©a má»™t hoáº·c nhiá»u component `<Route>`. NÃ³ sáº½ tÃ¬m trong cÃ¡c `<Route>` con cá»§a mÃ¬nh Ä‘á»ƒ khá»›p vá»›i URL hiá»‡n táº¡i vÃ  chá»‰ render `<Route>` Ä‘áº§u tiÃªn khá»›p.
  * `<Route>`: DÃ¹ng Ä‘á»ƒ Ä‘á»‹nh nghÄ©a má»™t tuyáº¿n Ä‘Æ°á»ng cá»¥ thá»ƒ. NÃ³ cÃ³ hai props quan trá»ng:
      * `path`: Má»™t chuá»—i xÃ¡c Ä‘á»‹nh Ä‘Æ°á»ng dáº«n URL (vÃ­ dá»¥: `/about`, `/products/:id`).
      * `element`: Component sáº½ Ä‘Æ°á»£c render khi URL khá»›p vá»›i `path`.

**VÃ­ dá»¥ trong file `App.js`:**

```jsx
import { Routes, Route } from 'react-router-dom';
import HomePage from './pages/HomePage';
import AboutPage from './pages/AboutPage';
import ContactPage from './pages/ContactPage';

function App() {
  return (
    <div>
      {/* NÆ¡i Ä‘á»‹nh nghÄ©a cÃ¡c tuyáº¿n Ä‘Æ°á»ng */}
      <Routes>
        <Route path="/" element={<HomePage />} />
        <Route path="/about" element={<AboutPage />} />
        <Route path="/contact" element={<ContactPage />} />
      </Routes>
    </div>
  );
}

export default App;
```

#### c. `Link` vÃ  `NavLink` ğŸ”—

Äá»ƒ ngÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘iá»u hÆ°á»›ng, báº¡n khÃ´ng thá»ƒ dÃ¹ng tháº» `<a>` thÃ´ng thÆ°á»ng vÃ¬ nÃ³ sáº½ gÃ¢y táº£i láº¡i trang. Thay vÃ o Ä‘Ã³, hÃ£y sá»­ dá»¥ng `<Link>`.

  * `<Link>`: Render ra má»™t tháº» `<a>` nhÆ°ng khi Ä‘Æ°á»£c nháº¥p vÃ o, nÃ³ sáº½ thay Ä‘á»•i URL mÃ  khÃ´ng cáº§n táº£i láº¡i trang. Prop quan trá»ng nháº¥t lÃ  `to`.

**VÃ­ dá»¥ táº¡o má»™t thanh Ä‘iá»u hÆ°á»›ng (Navigation Bar):**

```jsx
import { Link } from 'react-router-dom';

function Navigation() {
  return (
    <nav>
      <ul>
        <li><Link to="/">Trang chá»§</Link></li>
        <li><Link to="/about">Giá»›i thiá»‡u</Link></li>
        <li><Link to="/contact">LiÃªn há»‡</Link></li>
      </ul>
    </nav>
  );
}
```

  * `<NavLink>`: LÃ  má»™t biáº¿n thá»ƒ Ä‘áº·c biá»‡t cá»§a `<Link>`. NÃ³ biáº¿t Ä‘Æ°á»£c khi nÃ o nÃ³ Ä‘ang "active" (tá»©c lÃ  URL hiá»‡n táº¡i khá»›p vá»›i prop `to` cá»§a nÃ³). Äiá»u nÃ y ráº¥t há»¯u Ã­ch Ä‘á»ƒ táº¡o kiá»ƒu cho liÃªn káº¿t Ä‘ang hoáº¡t Ä‘á»™ng.

**VÃ­ dá»¥ sá»­ dá»¥ng `NavLink` Ä‘á»ƒ táº¡o kiá»ƒu cho link active:**

```jsx
import { NavLink } from 'react-router-dom';
import './Navigation.css'; // File CSS chá»©a class 'active-link'

function Navigation() {
  return (
    <nav>
      <ul>
        <li>
          <NavLink 
            to="/" 
            className={({ isActive }) => isActive ? 'active-link' : ''}
          >
            Trang chá»§
          </NavLink>
        </li>
        <li>
          <NavLink 
            to="/about" 
            className={({ isActive }) => isActive ? 'active-link' : ''}
          >
            Giá»›i thiá»‡u
          </NavLink>
        </li>
      </ul>
    </nav>
  );
}
```

-----

### 4\. CÃ¡c Hooks quan trá»ng trong React Router ğŸª

Hooks cho phÃ©p báº¡n truy cáº­p vÃ o tráº¡ng thÃ¡i cá»§a router (nhÆ° vá»‹ trÃ­ hiá»‡n táº¡i, tham sá»‘ URL) tá»« báº¥t ká»³ component nÃ o.

#### a. `useParams()`: Láº¥y tham sá»‘ Ä‘á»™ng tá»« URL

Ráº¥t há»¯u Ã­ch cho cÃ¡c trang chi tiáº¿t, vÃ­ dá»¥: `/users/123` hoáº·c `/products/iphone-15`.

**1. Äá»‹nh nghÄ©a Route vá»›i tham sá»‘ Ä‘á»™ng (dÃ¹ng dáº¥u `:`):**

```jsx
// trong App.js
import UserProfile from './pages/UserProfile';

<Routes>
  {/* ... cÃ¡c route khÃ¡c */}
  <Route path="/users/:userId" element={<UserProfile />} />
</Routes>
```

**2. Láº¥y giÃ¡ trá»‹ tham sá»‘ trong component:**

```jsx
// trong file UserProfile.js
import { useParams } from 'react-router-dom';

function UserProfile() {
  // useParams() tráº£ vá» má»™t object chá»©a cÃ¡c tham sá»‘ Ä‘á»™ng tá»« URL
  const { userId } = useParams();

  return (
    <div>
      <h1>ThÃ´ng tin ngÆ°á»i dÃ¹ng</h1>
      <p>ID ngÆ°á»i dÃ¹ng lÃ : {userId}</p>
      {/* BÃ¢y giá» báº¡n cÃ³ thá»ƒ dÃ¹ng userId Ä‘á»ƒ fetch dá»¯ liá»‡u tá»« API */}
    </div>
  );
}
```

#### b. `useNavigate()`: Äiá»u hÆ°á»›ng theo láº­p trÃ¬nh

ÄÃ´i khi, báº¡n muá»‘n chuyá»ƒn hÆ°á»›ng ngÆ°á»i dÃ¹ng sau má»™t hÃ nh Ä‘á»™ng nÃ o Ä‘Ã³ (vÃ­ dá»¥: sau khi Ä‘Äƒng nháº­p thÃ nh cÃ´ng, hoáº·c sau khi submit form).

```jsx
import { useNavigate } from 'react-router-dom';

function LoginForm() {
  const navigate = useNavigate();

  const handleLogin = (event) => {
    event.preventDefault();
    // Logic xÃ¡c thá»±c ngÆ°á»i dÃ¹ng á»Ÿ Ä‘Ã¢y...
    // Giáº£ sá»­ Ä‘Äƒng nháº­p thÃ nh cÃ´ng
    
    // Chuyá»ƒn hÆ°á»›ng Ä‘áº¿n trang dashboard
    navigate('/dashboard'); 
  };

  return (
    <form onSubmit={handleLogin}>
      {/* ... cÃ¡c input cá»§a form */}
      <button type="submit">ÄÄƒng nháº­p</button>
    </form>
  );
}
```

Báº¡n cÅ©ng cÃ³ thá»ƒ Ä‘iá»u hÆ°á»›ng lÃ¹i láº¡i má»™t trang: `Maps(-1)`.

#### c. `useLocation()`: Láº¥y thÃ´ng tin vá» URL hiá»‡n táº¡i

Hook nÃ y tráº£ vá» má»™t object `location` chá»©a thÃ´ng tin vá» URL hiá»‡n táº¡i, nhÆ° `pathname`, `search` (query string), vÃ  `hash`.

```jsx
import { useLocation } from 'react-router-dom';

function SomeComponent() {
  const location = useLocation();

  console.log('Pathname hiá»‡n táº¡i:', location.pathname); // vÃ­ dá»¥: "/products"
  console.log('Query string:', location.search); // vÃ­ dá»¥: "?category=electronics"

  return <div>Kiá»ƒm tra console log!</div>;
}
```

-----

### 5\. Ká»¹ thuáº­t nÃ¢ng cao: Nested Routes vÃ  Outlet ğŸ—ºï¸

Nested Routes (Route lá»“ng nhau) ráº¥t há»¯u Ã­ch Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c layout phá»©c táº¡p, vÃ­ dá»¥ nhÆ° má»™t trang dashboard cÃ³ sidebar cá»‘ Ä‘á»‹nh vÃ  pháº§n ná»™i dung thay Ä‘á»•i.

  * `<Outlet>`: LÃ  má»™t component Ä‘áº·c biá»‡t, hoáº¡t Ä‘á»™ng nhÆ° má»™t "chá»— giá»¯ chá»—" (placeholder). Khi má»™t route lá»“ng Ä‘Æ°á»£c khá»›p, component con cá»§a nÃ³ sáº½ Ä‘Æ°á»£c render táº¡i vá»‹ trÃ­ cá»§a `<Outlet>`.

**VÃ­ dá»¥ vá» layout Dashboard:**

**1. Äá»‹nh nghÄ©a cÃ¡c Route lá»“ng nhau trong `App.js`:**

```jsx
import DashboardLayout from './layouts/DashboardLayout';
import Profile from './pages/Profile';
import Settings from './pages/Settings';

<Routes>
  <Route path="/dashboard" element={<DashboardLayout />}>
    {/* CÃ¡c route con sáº½ Ä‘Æ°á»£c render bÃªn trong Outlet cá»§a DashboardLayout */}
    <Route path="profile" element={<Profile />} /> {/* URL sáº½ lÃ  /dashboard/profile */}
    <Route path="settings" element={<Settings />} /> {/* URL sáº½ lÃ  /dashboard/settings */}
  </Route>
</Routes>
```

**2. Táº¡o component `DashboardLayout.js` vá»›i `<Outlet>`:**

```jsx
import { Link, Outlet } from 'react-router-dom';

function DashboardLayout() {
  return (
    <div className="dashboard-container">
      <aside className="sidebar">
        {/* Sidebar cá»‘ Ä‘á»‹nh */}
        <nav>
          <Link to="/dashboard/profile">ThÃ´ng tin cÃ¡ nhÃ¢n</Link>
          <Link to="/dashboard/settings">CÃ i Ä‘áº·t</Link>
        </nav>
      </aside>
      
      <main className="content">
        {/* Ná»™i dung cá»§a cÃ¡c route con (Profile, Settings) sáº½ Ä‘Æ°á»£c render á»Ÿ Ä‘Ã¢y */}
        <Outlet />
      </main>
    </div>
  );
}

export default DashboardLayout;
```

### 6\. Xá»­ lÃ½ trang "KhÃ´ng tÃ¬m tháº¥y" (404 Not Found) ğŸš«

Äá»ƒ hiá»ƒn thá»‹ má»™t trang 404 cho báº¥t ká»³ URL nÃ o khÃ´ng khá»›p, hÃ£y táº¡o má»™t Route vá»›i `path="*"` vÃ  Ä‘áº·t nÃ³ á»Ÿ cuá»‘i cÃ¹ng trong component `<Routes>`.

```jsx
import NotFoundPage from './pages/NotFoundPage';

<Routes>
  <Route path="/" element={<HomePage />} />
  <Route path="/about" element={<AboutPage />} />
  {/* ... cÃ¡c route khÃ¡c */}

  {/* Route nÃ y sáº½ khá»›p vá»›i báº¥t ká»³ URL nÃ o khÃ´ng khá»›p á»Ÿ trÃªn */}
  <Route path="*" element={<NotFoundPage />} />
</Routes>
```

Hy vá»ng hÆ°á»›ng dáº«n chi tiáº¿t nÃ y sáº½ giÃºp báº¡n náº¯m vá»¯ng React Router vÃ  Ã¡p dá»¥ng hiá»‡u quáº£ vÃ o cÃ¡c dá»± Ã¡n React cá»§a mÃ¬nh\!